Blockchain [[Back]](note_crypto.md)
----

**區塊鏈是藉由密碼學串接並保護內容的串連文字記錄**
> + 這裡的保護內容，並不像我們先前指的加密保護;
區塊鏈基本上是不做加密保護的, 所有資料都是公開透明大家的看的到, 甚至大家都有儲存的;
因此這裡的保護是指**不可竄改**
> + 串連文字紀錄, 其實就是交易紀錄; 所有的交易紀錄會串連在一起, 形成類似鏈的東西, 而新的交易就接在這過去所有交易的後面, 一直接續下去。

所以總結起來, 區塊鏈是一個可以將交易內容公開串接在網路上, 且無法竄改的技術

# 名詞解釋

## 中心化

中心化指的是資訊都會經過某一單位並由此單位做中介處理;
好比說今天你要轉帳給一個人, 那這筆資料就會經過銀行, 銀行處理好資料之後儲存在他們自己的資料庫裡, 那麼銀行就是一個中心.

換個方面來想, **你是否有將錢轉入他人手裡**的這件事實就完全掌握在銀行手裡;
銀行說有就有, 沒有就沒有; 如果銀行被駭, 那這筆資料就有可能被改.

## 礦工

區塊鏈是一個串接文字紀錄的技術, 而串接就需要將資料做特定處理, 這個處理就稱打包; 而打包需要做的動作包括
> + 在網路上抓取交易訊息
> + 整理成區塊
> + 串接區塊到 chain 上

礦工就是要把上一個區塊 (交易堆) 的資訊, 加上目前這個區塊的資訊, 包起來接到鏈上; 最先打包到鏈上的人, 可以獲得報酬.

![Mining_flow](Mining.jpg)

上圖解釋打包是怎麼回事, 只是其中的 Mining Pool(礦池) 就是一群礦工一起挖礦, 再一起分配報酬而已.

為什麼說不一定挖得到礦, 甚至說挖到礦的機率是極低的?
> 因為打包這件事情本身就是有難度的, 而且難度極高; 每當成功打包 2016 個區塊, 系統就會自行計算現在全世界有多少人在進行挖礦, 進而調整打包的難度;
>> 比特幣系統會將難度, 控制在大約每十分鐘全世界可以打包一個區塊; 以太幣系統則是每 15 秒一個

## 工作量證明 (PoW, Proof of Work)

用雜湊值的推算來當 PoW. 由於雜湊結果是完全無法預測, 只能用暴力的方式去窮舉, 因此運算能力是極大考驗
> Bitcoin 鏈所使用的是 SHA-256, 礦工若要把新的區塊打包上鏈的話, 就必須將交易資訊接在一起成為一個數字 M,
接著在這個數字 M 中再加入幾個未知的數字 X, 重複運算 `M + X` 的雜湊值, 直到雜湊值符合一個條件
>> 雜湊值需小於某個數字(由系統運算來決定難度), 換個說法就是雜湊值的前幾位數皆是 0

+ 區塊鏈運作流程
    > 區塊鏈是串聯交易紀錄的去中心化技術, 所有交易紀錄都會公開在鏈上, 而礦工負責將後續的交易堆(區塊)接上去, 他們需要進行 SHA-256 運算值到雜湊值符合開頭夠多的 0. <br>
    > 只要有人成功, 他就成功把區塊接上並獲得報酬, 同時廣播給其他節點; 其他節點收到資訊之後, 也要把此區塊打包上他們自己 local 的鏈上(但是不會有報酬), 接著就繼續下一個區塊的打包工作.


## Block info

![Block_data](Block_data.jpg)

一個區塊裡面包含 (一個區塊裡面並不限於一個交易):
> + 上個區塊的雜湊值
> + 時間戳記
> + 交易資料(Merkle root)
> + Nonce (Number use only once)

礦工實際上做的事情就是不斷更改 `Nonce`, 使得整個區塊的雜湊值符合標準, 而這個符合標準的雜湊值就會被包進下個區塊中.

至於我們怎麼把這麼多交易紀錄放在一個區塊中, 就要使用 `Merkle Tree`


+ Merkle tree
    > 將每個交易 (圖片中最下排) 先做雜湊之後, 兩兩接在一起(Concatenate)做雜湊, 再兩兩接在一起雜湊, 一直下去最後會有一個最終值, 而這個值就稱為 Merkle Root

    > `Merkle Root` 會做為這些交易的代表值, 打包進區塊中.

    ![Merkle_Root](Merkle_Root.jpg)

+ [blockchain.com](https://ithelp.ithome.com.tw/articles/10278801)
    > 記錄所有的區塊資料


# Reference

+ [DAY 25- 區塊鏈 Blockchain](https://ithelp.ithome.com.tw/articles/10278801)
